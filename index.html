<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Car Parts Lookup</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
select, input { margin: 5px; padding: 5px; }
table { border-collapse: collapse; width: 100%; margin-top: 20px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
th { background-color: #f2f2f2; }
</style>
</head>
<body>

<h2>Car Parts Lookup</h2>

<label>Make:</label>
<select id="make" disabled>
    <option value="">Select Make</option>
</select>

<label>Model:</label>
<select id="model" disabled>
    <option value="">Select Model</option>
</select>

<label>Year:</label>
<select id="year" disabled>
    <option value="">Select Year</option>
</select>

<label>Search Part:</label>
<input type="text" id="search" placeholder="Type part name or number..." disabled />

<table>
<thead>
<tr>
<th>Part Name</th>
<th>Part Number</th>
</tr>
</thead>
<tbody id="parts-body"></tbody>
</table>

<script>

let inventory = [];
let filteredParts = [];

const makeSelect = document.getElementById('make');
const modelSelect = document.getElementById('model');
const yearSelect = document.getElementById('year');
const searchInput = document.getElementById('search');
const partsBody = document.getElementById('parts-body');


// Load inventory from GitHub
fetch('./inventory.json')
.then(response => response.json())
.then(data => {
    inventory = data;
    populateMakes();
})
.catch(error => alert("Error loading inventory: " + error));


// Populate Make dropdown
function populateMakes() {
    makeSelect.innerHTML = '<option value="">Select Make</option>';
    const makes = [...new Set(inventory.map(i => i.Make))].sort();

    makes.forEach(make => {
        const option = document.createElement('option');
        option.value = make;
        option.textContent = make;
        makeSelect.appendChild(option);
    });

    makeSelect.disabled = false;
}


// When Make changes → Populate Model
makeSelect.addEventListener('change', () => {

    modelSelect.innerHTML = '<option value="">Select Model</option>';
    yearSelect.innerHTML = '<option value="">Select Year</option>';
    yearSelect.disabled = true;
    searchInput.disabled = true;
    partsBody.innerHTML = '';

    if (!makeSelect.value) {
        modelSelect.disabled = true;
        return;
    }

    const models = [...new Set(
        inventory
        .filter(i => i.Make === makeSelect.value)
        .map(i => i.Model)
    )].sort();

    models.forEach(model => {
        const option = document.createElement('option');
        option.value = model;
        option.textContent = model;
        modelSelect.appendChild(option);
    });

    modelSelect.disabled = false;
});


// When Model changes → Populate Year
modelSelect.addEventListener('change', () => {

    yearSelect.innerHTML = '<option value="">Select Year</option>';
    searchInput.disabled = true;
    partsBody.innerHTML = '';

    if (!modelSelect.value) {
        yearSelect.disabled = true;
        return;
    }

    const years = [...new Set(
        inventory
        .filter(i => i.Make === makeSelect.value && i.Model === modelSelect.value)
        .map(i => i.Year)
    )].sort((a, b) => b - a); // newest first

    years.forEach(year => {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year;
        yearSelect.appendChild(option);
    });

    yearSelect.disabled = false;
});


// When Year changes → Show Parts
yearSelect.addEventListener('change', () => {
    searchInput.disabled = !yearSelect.value;
    updateParts();
});


// Search filter
searchInput.addEventListener('input', () => {
    updateParts();
});


function updateParts() {

    partsBody.innerHTML = '';

    if (!yearSelect.value) return;

    filteredParts = inventory.filter(i =>
        i.Make === makeSelect.value &&
        i.Model === modelSelect.value &&
        i.Year == yearSelect.value
    );

    const searchTerm = searchInput.value.toLowerCase();

    if (searchTerm) {
        filteredParts = filteredParts.filter(p =>
            p["Part Name"].toLowerCase().includes(searchTerm) ||
            p["Part Number"].toLowerCase().includes(searchTerm)
        );
    }

    filteredParts.forEach(p => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${p["Part Name"]}</td>
            <td>${p["Part Number"]}</td>
        `;
        partsBody.appendChild(row);
    });
}

</script>

</body>
</html>





